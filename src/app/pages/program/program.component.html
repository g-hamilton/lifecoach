<app-auth-navbar></app-auth-navbar>

<div class="full-page pricing-page">


<!--  <div *ngIf="program && program.image"-->
<!--  class="jumbotron jumbotron-fluid"-->
<!--  [ngStyle]="{'background-image': 'url(' + program.image +')'}"-->
<!--  style="margin-top: 60px; height: 75vh; background-position: center; background-size: cover; background-repeat: no-repeat;">-->
<!--  </div>-->

<!--  jumbotron jumbotron-fluid test image-->


  <!-- Program cover img if program loaded and image exists -->
  <ng-container *ngIf="program && (program.imagePaths.original || program.imagePaths.webp)">
    <div class="jumbotron jumbotron-fluid test test-575-jpg"
         [ngStyle]="{'background-image': 'url(' + program.imagePaths.original['575'] +')'}"></div>
    <div class="jumbotron jumbotron-fluid test test-768-jpg"
         [ngStyle]="{'background-image': 'url(' + program.imagePaths.original['768'] +')'}"></div>
    <div class="jumbotron jumbotron-fluid test test-991-jpg"
         [ngStyle]="{'background-image': 'url(' + program.imagePaths.original['991'] +')'}"></div>
    <div class="jumbotron jumbotron-fluid test test-1200-jpg"
         [ngStyle]="{'background-image': 'url(' + program.imagePaths.original['1200'] +')'}"></div>
    <div class="jumbotron jumbotron-fluid test test-original-jpg"
         [ngStyle]="{'background-image': 'url(' + program.imagePaths.original.fullSize +')'}"></div>
    <div class="jumbotron jumbotron-fluid test test-575-webp"
         [ngStyle]="{'background-image': 'url(' + program.imagePaths.webp['575'] +')'}"></div>
    <div class="jumbotron jumbotron-fluid test test-768-webp"
         [ngStyle]="{'background-image': 'url(' + program.imagePaths.webp['768'] +')'}"></div>
    <div class="jumbotron jumbotron-fluid test test-991-webp"
         [ngStyle]="{'background-image': 'url(' + program.imagePaths.webp['991'] +')'}"></div>
    <div class="jumbotron jumbotron-fluid test test-1200-webp"
         [ngStyle]="{'background-image': 'url(' + program.imagePaths.webp['1200'] +')'}"></div>
    <div class="jumbotron jumbotron-fluid test test-original-webp"
         [ngStyle]="{'background-image': 'url(' + program.imagePaths.webp.fullSize +')'}"></div>
  </ng-container>

<!--  jumbotron jumbotron-fluid test images-->

  <!-- Placeholder cover img if program loaded and no image exists -->
  <div *ngIf="program && !program.image"
  class="jumbotron jumbotron-fluid" 
  style="margin-top: 60px; height: 75vh; background-color: white;">
    <div class="container">
      <div class="row justify-content-center text-center">
        <div class="col-md-10">
          <img
          class=" mt-5"
          [src]="'assets/img/awaiting-image.png'"
          [alt]="program.title"
          style="height: 300px;" />
        </div>
      </div>
    </div>
  </div>

  <div class="">
    <div class=" container">
        
        <!-- Program loaded into view - keeps stripe element loaded in the dom but hides until program loaded -->
        <div class="hide" [ngClass]="{'show': program}">

          <div *ngIf="program" class=" row">
            <div class=" col-md-6 ml-auto mr-auto text-center">
              <h1 class=" title">{{ program.title }}</h1>
              <h4>
                {{ program.subtitle }}
              </h4>
              <!-- program duration -->
              <div *ngIf="program?.duration" class="">
                <h6 class="text-muted">
                  <span class=""><i class="far fa-calendar-alt"></i> {{ program.duration }} weeks</span>
                </h6>
              </div>
              <!-- program sessions -->
              <div *ngIf="program?.numSessions" class="">
                <h6 class="text-muted">
                  <span class=""><i class="fas fa-comments"></i> {{ program.numSessions }} private 1-to-1 video coaching sessions</span>
                </h6>
              </div>
              <div class=" mt-4 mb-5">
                <!-- if zero enrollments -->
                <span *ngIf="!programEnrollments?.totalEnrollments" class=" badge badge-danger">
                  ðŸ”¥ New Coaching Program
                </span>
                <!-- if 1 enrollment -->
                <span *ngIf="programEnrollments?.totalEnrollments && programEnrollments?.totalEnrollments == 1" class="">
                  1 person enrolled
                </span>
                <!-- if more than 1 enrollment -->
                <span *ngIf="programEnrollments?.totalEnrollments && programEnrollments?.totalEnrollments > 1" class="">
                  {{ programEnrollments.totalEnrollments }} people enrolled
                </span>
                <!-- is coach viewing own program? -->
                <div *ngIf="userId === program.sellerUid">
                  <p class=" text-success text-center mt-3">
                    You created this program
                  </p>
                </div>
                <!-- has user already purcahsed? -->
                <div *ngIf="(userId !== program.sellerUid) && userClaims && userClaims[program.programId]">
                  <p class=" text-success text-center mt-3">
                    You purchased this program
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- program promo video? -->
          <div *ngIf="program && program.promoVideo && program.promoVideo.downloadURL" class="">
            <div class=" row">
              <div class=" col-md-6 ml-auto mr-auto text-center">
                <vg-player>
                  <vg-controls>
                      <vg-play-pause></vg-play-pause>
                      <vg-playback-button></vg-playback-button>
                
                      <vg-time-display vgProperty="current" vgFormat="mm:ss"></vg-time-display>
                
                      <vg-scrub-bar>
                          <vg-scrub-bar-current-time></vg-scrub-bar-current-time>
                          <vg-scrub-bar-buffering-time></vg-scrub-bar-buffering-time>
                      </vg-scrub-bar>
                
                      <vg-time-display vgProperty="total" vgFormat="mm:ss"></vg-time-display>
                
                      <vg-mute></vg-mute>
                      <vg-volume></vg-volume>
                
                      <vg-fullscreen></vg-fullscreen>
                  </vg-controls>
                
                  <video #media [vgMedia]="media" id="singleVideo" preload="auto">
                      <source [src]="program.promoVideo.downloadURL">
                  </video>
                </vg-player>
              </div>
            </div>
          </div>

          <!-- program description & info -->
          <div *ngIf="program" class=" row pb-5">
            <div class=" col-12">
              <div class=" card">
                <div class=" card-body p-5">

                  <!-- last updated -->
                  <!-- <span *ngIf="program?.lastUpdated" class=" ml-3">
                    Last updated: {{ getDisplayDate(program.lastUpdated) }}
                  </span>
                  <span *ngIf="!program?.lastUpdated" class=" ml-3">
                    Last updated: {{ getDisplayDate(now) }}
                  </span> -->

                  <!-- description -->
                  <div *ngIf="program.description ; else noDescription">
                    <div id="test" class=" card-description" [innerHTML]="program.description"></div>
                  </div>
                  <ng-template #noDescription>
                    <div id="no-description" class=" card-description">
                      Awaiting description
                    </div>
                  </ng-template>

                  <hr>

                  <!-- learning points -->
                  <div *ngIf="program.learningPoints" class=" mt-4">
                    <h5 class=" card-title"> What you'll learn </h5>
                    <div *ngIf="program.learningPoints" class=" mt-4">
                      <ul>
                        <li *ngFor="let item of program.learningPoints" style="color: rgba(255, 255, 255, 0.7);">
                          {{ item }}
                        </li>
                      </ul>
                    </div>
                  </div>

                  <!-- requirements -->
                  <div class=" mt-5">
                    <h5 class=" card-title"> Requirements </h5>
                    <div *ngIf="!program.requirements">
                      <ul>
                        <li style="color: rgba(255, 255, 255, 0.7);"> No special requirements or prerequisites </li>
                      </ul>
                    </div>
                    <div *ngIf="program.requirements">
                      <ul>
                        <li *ngFor="let item of program.requirements" style="color: rgba(255, 255, 255, 0.7);">
                          {{ item }}
                        </li>
                      </ul>
                    </div>
                  </div>

                  <!-- ideal clients -->
                  <div *ngIf="program.targets" class=" mt-5">
                    <h5 class=" card-title"> The perfect coaching program for: </h5>
                    <div *ngIf="program.targets" class=" mt-4">
                      <ul>
                        <li *ngFor="let item of program.targets" style="color: rgba(255, 255, 255, 0.7);">
                          {{ item }}
                        </li>
                      </ul>
                    </div>
                  </div>

                  <hr>

                  <!-- program duration -->
                  <div *ngIf="program?.duration ; else noDuration" class=" mt-5">
                    <h5 class=" card-title"> Average program duration: </h5>
                    <h6 class="text-muted">
                      <span class=""><i class="far fa-calendar-alt"></i> {{ program.duration }} weeks</span>
                    </h6>
                    <p>Note: This is an average duration. 
                      Your Coach will tailor your program to fit your needs so this duration is only intended as a guide</p>
                  </div>
                  <ng-template #noDuration>
                    <div class=" card-description mt-5">
                      Awaiting duration
                    </div>
                  </ng-template>

                  <!-- program sessions -->
                  <div *ngIf="program?.numSessions ; else noNumSessions" class=" mt-5">
                    <h5 class=" card-title"> Number of sessions: </h5>
                    <h6 class="text-muted">
                      <span class=""><i class="fas fa-comments"></i> {{ program.numSessions }} </span>
                    </h6>
                  </div>
                  <ng-template #noNumSessions>
                    <div class=" card-description mt-5">
                      Awaiting session information
                    </div>
                  </ng-template>

                  <!-- program language -->
                  <div *ngIf="program?.language ; else noLanguage" class=" mt-5">
                    <h5 class=" card-title"> Program language: </h5>
                    <h6 class="text-muted">
                      <i class="fas fa-comment"></i> {{ languages[program.language]?.nativeName }}
                    </h6>
                  </div>
                  <ng-template #noLanguage>
                    <div class=" card-description mt-5">
                      Awaiting language
                    </div>
                  </ng-template>

                </div>
              </div>
              <!-- end card -->

              <!-- coach card -->
              <div class=" mt-5"></div>
              <app-program-coach [program]="program"></app-program-coach>
              <!-- end coach card -->

              <!-- program feedback *BROWSER ONLY* -->
              <div *ngIf="browser">
                <div class=" col-md-6 ml-auto mr-auto text-center mt-5">
                  <h2 class=" title"> What others are saying </h2>
                </div>
                <div class=" card">
                  <div class=" card-body mr-3">
                    <h4 class=" card-title d-inline-block"> Program Feedback </h4>
                    <div>
                      <app-program-feedback
                      [program]="program">
                      </app-program-feedback>
                    </div>
  
                    <!-- browse reviews -->
                    <app-program-browse-reviews
                    [program]="program">
                    </app-program-browse-reviews>
                  </div>
                </div>
              </div>
              <!-- end program feedback -->

              <!-- program pricing & call booking -->

              <!-- template if program pricing strategy is full -->
              <div *ngIf="program && program.pricingStrategy && program.pricingStrategy === 'full' 
              && program.fullPrice && program.currency ; else flexiPricing" class=" mt-5">
                <div class=" row">
                  <div class=" col-md-6 ml-auto mr-auto text-center">
                    <h1 class=" title">Join the program</h1>
                    <h4 class=" description">
                      Got questions? Schedule a free discovery session with your coach before you get started.
                    </h4>
                  </div>
                </div>

                <!-- payment options row -->
                <div class=" row">

                  <!-- spacer col -->
                  <div class=" col-lg-2 col-xs-0"></div>

                  <!-- discover col -->
                  <div class=" col-lg-4 col-xs-12">
                    <div class=" card card-pricing card-raised card-primary">
                      <div class=" card-body">
                        <h1 class=" card-title">discover</h1>
                        <img
                          alt="Image"
                          class=" card-img"
                          src="assets/img/card-primary.png"
                        />
          
                        <ul class=" list-group">
                          <li class=" list-group-item">Schedule a discovery session</li>
                        </ul>
                        <div class=" card-prices pl-3 pr-3">
                          <h3 class=" text-on-front">FREE</h3>
                          <h5 class=" text-on-back">FREE</h5>
                          <p class=" plan">Check this program is right for you. <br>Ask your coach anything you like prior to starting.</p>
                        </div>
                      </div>
                      <div class=" card-footer text-center mb-3 mt-3">
                        <!-- schedule call button -->
                        <!-- disabled for program seller -->
                        <!-- userId === program.sellerUid -->
                        <button class=" btn btn-round btn-just-icon btn-primary"
                        [disabled]="userId === program.sellerUid"
                        (click)="this.userId ? openScheduleCallModal() : registerModal.show()">
                         Schedule a Session
                        </button>
                      </div>
                    </div>
                  </div>
                  <!--  end discover col -->

                  <!-- pay in full col -->
                  <div class=" col-lg-4 col-xs-12">
                    <div class=" card card-pricing card-success card-white">
                      <div class=" card-body">
                        <h1 class=" card-title">program</h1>
                        <img
                              alt="Image"
                              class=" card-img"
                              src="assets/img/card-success.png"
                        />
              
                        <ul class=" list-group">
                          <li class=" list-group-item">Buy the full program</li>
                        </ul>
                        <div class=" card-prices pl-3 pr-3">
                          <h3 class=" text-on-front">{{ currencySymbol + displayFullPrice }}</h3>
                          <h5 class=" text-on-back">{{ currencySymbol + displayFullPrice }}</h5>
                          <p class=" plan">Get full access</p>
                        </div>
                      </div>
                      <div class=" card-footer text-center mb-3 mt-3">
                        <!-- purchase button -->
                        <!-- disabled for program seller or if already purchased -->
                        <!-- userId === program.sellerUid || userClaims && userClaims[program.programId] -->
                        <button
                        class=" btn btn-round btn-success"
                        id="buynowfull"
                        type="button"
                        data-target="#payModal"
                        (click)="purchaseType = 'full' ; userId ? payModal.show() : registerModal.show()"
                        [disabled]="userId === program.sellerUid || userClaims && userClaims[program.programId]">
                          <span
                          *ngIf="purchasingProgram"
                          class="spinner-border spinner-border-sm"
                          role="status"
                          ></span> {{ purchasingProgram ? 'Purchasing...' : 'Buy Now'}}
                        </button>
                        <div class="mt-2">
                          <small>
                            28-Day Money-Back Guarantee.
                            <a href="https://lifecoach.freshdesk.com/support/solutions/articles/47001123378-refunds" taget="_blank">
                              Info
                            </a>
                          </small>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- end pay in full col -->

                </div>
                <!-- end payment options row -->

                <!-- Currency picker row -->
                <div class=" row">
                  <div class=" col-md-4 ml-auto mr-auto">
                    <div>
                      <label> Show prices in </label>
                    </div>
                    <app-select-currency
                    [currency]="clientCurrency"
                    (currencyEvent)="onManualCurrencyChange($event)">
                    </app-select-currency>
                  </div>
                </div>
                <!-- end currency picker row -->

              </div>
              <!-- end template if pricing strategy is full -->

              <!-- template if program pricing strategy is flexible or not set yet -->
              <ng-template #flexiPricing class=" mt-5">
                <!-- if were still waiting for pricing or session information -->
                <div *ngIf="!program || !program.pricingStrategy || !program.fullPrice || 
                (program.pricingStrategy == 'flexible' && !program.pricePerSession) || !program.currency"
                >
                  <p>
                    Awaiting pricing & session information
                  </p>
                </div>

                <!-- we've got all the info we need for flexible pricing -->
                <div *ngIf="program && program.pricingStrategy && program.fullPrice && 
                (program.pricingStrategy == 'flexible' && program.pricePerSession) && program.currency" class=" row mt-5">
                  <div class=" col-md-6 ml-auto mr-auto text-center">
                    <h1 class=" title">Join the program</h1>
                    <h4 class=" description">
                      Got questions? Schedule a free discovery session with your coach before you get started.
                    </h4>
                  </div>
                </div>

                <!-- payment options row -->
                <div *ngIf="program && program.pricingStrategy && program.fullPrice && 
                (program.pricingStrategy == 'flexible' && program.pricePerSession) && program.currency" class=" row">

                  <!-- discover col -->
                  <div class=" col-lg-4 col-xs-12">
                    <div class=" card card-pricing card-primary">
                      <div class=" card-body">
                        <h1 class=" card-title">discover</h1>
                        <img
                          alt="Image"
                          class=" card-img"
                          src="assets/img/card-primary.png"
                        />
          
                        <ul class=" list-group">
                          <li class=" list-group-item mt-4">Schedule a discovery session</li>
                        </ul>
                        <div class=" card-prices pl-3 pr-3">
                          <h3 class=" text-on-front">FREE</h3>
                          <h5 class=" text-on-back">FREE</h5>
                          <p class=" plan">Check this program is right for you. <br>Ask your coach anything you like prior to starting.</p>
                        </div>
                      </div>
                      <div class=" card-footer text-center mb-3 mt-3">
                        <!-- schedule call button -->
                        <!-- disabled for program seller -->
                        <!-- userId === program.sellerUid -->
                        <button class=" btn btn-round btn-just-icon btn-primary"
                        [disabled]="userId === program.sellerUid"
                        (click)="this.userId ? openScheduleCallModal() : registerModal.show()">
                         Schedule a Session
                        </button>
                      </div>
                    </div>
                  </div>
                  <!--  end discover col -->

                  <!-- pay in full col -->
                  <div *ngIf="program?.currency && program?.fullPrice" class=" col-lg-4 col-xs-12">
                    <div class=" card card-pricing card-success card-raised card-white">
                      <div class=" card-body">
                        <h1 class=" card-title">program</h1>
                        <img
                              alt="Image"
                              class=" card-img"
                              src="assets/img/card-success.png"
                        />
              
                        <ul class=" list-group">
                          <li class=" list-group-item">Buy the full program</li>
                          <li class=" list-group-item text-danger">Save {{ ((program.fullPrice / (program.numSessions * program.pricePerSession)) * 100).toFixed() }}%</li>
                        </ul>
                        <div class=" card-prices pl-3 pr-3">
                          <h3 class=" text-on-front">{{ currencySymbol + displayFullPrice }}</h3>
                          <h5 class=" text-on-back">{{ currencySymbol + displayFullPrice }}</h5>
                          <p class=" plan">Get full access</p>
                        </div>
                      </div>
                      <div class=" card-footer text-center mb-3 mt-3">
                        <!-- purchase button -->
                        <!-- disabled for program seller or if already purchased -->
                        <!-- userId === program.sellerUid || userClaims && userClaims[program.programId] -->
                        <button
                        class=" btn btn-round btn-success"
                        id="buynowfull"
                        type="button"
                        data-target="#payModal"
                        (click)="purchaseType = 'full' ; userId ? payModal.show() : registerModal.show()"
                        [disabled]="userId === program.sellerUid || userClaims && userClaims[program.programId]">
                          <span
                          *ngIf="purchasingProgram"
                          class="spinner-border spinner-border-sm"
                          role="status"
                          ></span> {{ purchasingProgram ? 'Purchasing...' : 'Buy Now'}} 
                        </button>
                        <div class="mt-2">
                          <small>
                            28-Day Money-Back Guarantee.
                            <a href="https://lifecoach.freshdesk.com/support/solutions/articles/47001123378-refunds" taget="_blank">
                              Info
                            </a>
                          </small>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- end pay in full col -->

                  <!-- pay per session col -->
                  <div *ngIf="program?.currency && program?.fullPrice && program?.pricePerSession" class=" col-lg-4 col-xs-12">
                    <div class=" card card-pricing card-success card-white">
                      <div class=" card-body">
                        <h1 class=" card-title">session</h1>
                        <img
                          alt="Image"
                          class=" card-img"
                          src="assets/img/card-warning.png"
                        />

                        <ul class=" list-group">
                          <li class=" list-group-item mt-4">Pay Per Session</li>
                        </ul>
                        <div class=" card-prices pl-3 pr-3">
                          <h3 class=" text-on-front">{{ currencySymbol + displaySessionPrice }}</h3>
                          <h5 class=" text-on-back">{{ currencySymbol + displaySessionPrice }}</h5>
                          <p class=" plan">Buy a single session</p>
                        </div>
                      </div>
                      <div class=" card-footer text-center mb-3 mt-3">
                        <!-- purchase button -->
                        <!-- disabled for program seller or if already purchased -->
                        <!-- userId === program.sellerUid || userClaims && userClaims[program.programId] -->
                        <button
                        class=" btn btn-round btn-warning"
                        id="buynowfull"
                        type="button"
                        data-target="#payModal"
                        (click)="purchaseType = 'session' ; userId ? payModal.show() : registerModal.show()"
                        [disabled]="userId === program.sellerUid || userClaims && userClaims[program.programId]">
                          <span
                          *ngIf="purchasingProgram"
                          class="spinner-border spinner-border-sm"
                          role="status"
                          ></span> {{ purchasingProgram ? 'Purchasing...' : 'Buy Now'}} 
                        </button>
                        <div class="mt-2">
                          <small>
                            28-Day Money-Back Guarantee.
                            <a href="https://lifecoach.freshdesk.com/support/solutions/articles/47001123378-refunds" taget="_blank">
                              Info
                            </a>
                          </small>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- end pay per session col -->

                </div>
                <!-- end payment options row -->

                <!-- Currency picker row -->
                <div *ngIf="program && program.pricingStrategy && program.fullPrice && 
                (program.pricingStrategy == 'flexible' && program.pricePerSession) && program.currency" class=" row">
                  <div class=" col-md-4 ml-auto mr-auto">
                    <div>
                      <label> Show prices in </label>
                    </div>
                    <app-select-currency
                    [currency]="clientCurrency"
                    (currencyEvent)="onManualCurrencyChange($event)">
                    </app-select-currency>
                  </div>
                </div>
                <!-- end currency picker row -->

              </ng-template>
              <!-- end template if pricing strategy is flexible -->

            </div>
            <!-- end col -->
          </div>
          <!-- End row -->

        </div>
        <!-- end of program loaded into view -->

        <!-- Pay Modal -->
        <div
            aria-hidden="true"
            aria-labelledby="payModalLabel"
            bsModal
            class="modal fade"
            #payModal="bs-modal"
            id="payModal"
            role="dialog"
            tabindex="-1"
        >
            <div class="modal-dialog payment-modal-dialogue">
                <div class="modal-content payment-modal-content">
                    <div class="modal-body payment-modal-body">
                        <div class="ElementsModal--top-banner ElementsModal--top-banner-overlay" [style.background-image]="'url(' + program?.image + ')'">
                            <div class="ElementsModal--sales-info">
                              <div class="ElementsModal--top">
                                <div *ngIf="program && program.title" class="ElementsModal--company"> {{ program.title }} </div>
                                <button class="ElementsModal--close" (click)="payModal.hide()">
                                  <svg
                                    width="20px"
                                    height="20px"
                                    viewBox="0 0 20 20"
                                    version="1.1"
                                    xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink"
                                  >
                                    <defs>
                                      <path
                                        d="M10,8.8766862 L13.6440403,5.2326459 C13.9542348,4.92245137 14.4571596,4.92245137 14.7673541,5.2326459 C15.0775486,5.54284044 15.0775486,6.04576516 14.7673541,6.3559597 L11.1238333,9.99948051 L14.7673541,13.6430016 C15.0775486,13.9531961 15.0775486,14.4561209 14.7673541,14.7663154 C14.4571596,15.0765099 13.9542348,15.0765099 13.6440403,14.7663154 L10,11.1222751 L6.3559597,14.7663154 C6.04576516,15.0765099 5.54284044,15.0765099 5.2326459,14.7663154 C4.92245137,14.4561209 4.92245137,13.9531961 5.2326459,13.6430016 L8.87616671,9.99948051 L5.2326459,6.3559597 C4.92245137,6.04576516 4.92245137,5.54284044 5.2326459,5.2326459 C5.54284044,4.92245137 6.04576516,4.92245137 6.3559597,5.2326459 L10,8.8766862 Z"
                                        id="path-1"
                                      ></path>
                                    </defs>
                                    <g
                                      id="Payment-recipes"
                                      stroke="none"
                                      stroke-width="1"
                                      fill="none"
                                      fill-rule="evenodd"
                                    >
                                      <g
                                        id="Elements-Popup"
                                        transform="translate(-816.000000, -97.000000)"
                                      >
                                        <g id="close-btn" transform="translate(816.000000, 97.000000)">
                                          <circle
                                            id="Oval"
                                            fill-opacity="0.3"
                                            fill="#AEAEAE"
                                            cx="10"
                                            cy="10"
                                            r="10"
                                          ></circle>
                                          <mask id="mask-2" fill="white">
                                            <use xlink:href="#path-1"></use>
                                          </mask>
                                          <use
                                            id="Mask"
                                            fill-opacity="0.5"
                                            fill="#FFFFFF"
                                            opacity="0.5"
                                            xlink:href="#path-1"
                                          ></use>
                                        </g>
                                      </g>
                                    </g>
                                  </svg>
                                </button>
                              </div>
                              <div class="ElementsModal--product ElementsModal--details"> {{purchaseType === 'full' ? 'Online Coaching Program' : 'Online Coaching Program - Single Session'}} </div>
                              <div *ngIf="program" class="ElementsModal--price ElementsModal--details"> 
                                {{ currencySymbol + '' + (purchaseType === 'full' ? displayFullPrice : displaySessionPrice) }}
                              </div>
                              <div *ngIf="account && account.accountEmail" class="ElementsModal--email ElementsModal--details"> {{ account.accountEmail }} </div>
                            </div>
                          </div>
                        <div class="ElementsModal--payment-details">
                            <form
                              class="ElementsModal--payment-form"
                              id="payment-form"
                            >
                              <div class="form-row">
                                <div class="ElementsModal--forms" style="width: 80%;">
                                  <div class="ElementsModal--form">
                                    <label for="ElementsModal--card-element">
                                      <span class="ElementsModal--form-label spacer"
                                        >Card details</span
                                      >
                                      <div class="StripeElement" id="card-element">
                                        <!-- A Stripe Element will be inserted here. -->
                                      </div>
                                    </label>
                                    <!-- Used to display form errors. -->
                                    <div
                                      id="card-errors"
                                      class="ElementsModal--error-message"
                                      role="alert"
                                    ></div>
                                  </div>
                                  <!-- <div class="ElementsModal--form">
                                    <label class="select">
                                      <span class="ElementsModal--form-label spacer"
                                        >Country or region</span
                                      >
                                      <div id="country" class="ElementsModal--form-select">
                                        <select
                                        name="country"
                                        autocomplete="billing country"
                                        aria-label="Country or region"
                                        [(ngModel)]="clientCountry"
                                        [ngModelOptions]="{standalone: true}"
                                        >
                                        <option
                                        *ngFor="let country of countries" [value]="country.code">
                                        {{ country.emoji + ' ' + country.name }}
                                        </option>
                                        </select>
                                      </div>
                                    </label>
                                  </div> -->
                                  <div class="ElementsModal--form" *ngIf="program">
                                    <input
                                      type="hidden"
                                      name="amount"
                                      [value]="program.fullPrice"
                                    />
                                    <input
                                      type="hidden"
                                      name="currency"
                                      [value]="program.currency"
                                    />
                                    <input
                                      type="hidden"
                                      name="description"
                                      [value]="program.title"
                                    />
                                    <button
                                      type="submit"
                                      class="btn btn-success btn-fill btn-round btn-block mt-4"
                                    >
                                    <span
                                      *ngIf="purchasingProgram"
                                      class="spinner-border spinner-border-sm"
                                      role="status"
                                      ></span> {{ purchasingProgram ? 'Processing...' : currencySymbol + '' + (purchaseType === 'full' ? displayFullPrice : displaySessionPrice) }}
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </form>
                          </div>
                    </div>
                    <div class="modal-footer ElementsModal--footer-text">
                        By purchasing this program, you agree to Lifecoachâ€™s
                        <a href="https://lifecoach.freshdesk.com/support/solutions/articles/47000883660"
                          >Terms and Conditions.</a
                        >
                    </div>
                </div>
            </div>
        </div>
        <!-- End of pay modal -->

        <!-- Login modal -->
        <div
        aria-hidden="true"
        aria-labelledby="loginModalLabel"
        bsModal
        class="modal fade"
        #loginModal="bs-modal"
        id="loginModal"
        role="dialog"
        tabindex="-1"
        >
        <div class="modal-dialog" style="transform: translate(0,0);">
            <div class="modal-content">
            <div class="modal-body login-page">
                <form
                class=" form"
                id="loginValidation"
                [formGroup]="loginForm"
                (ngSubmit)="onLogin()"
                >
                <div class="card card-login card-white">
                    <div class=" card-header">
                    <img alt="" class="card-img" style="width: 72%;" src="assets/img/card-primary.png" />
                    <h1 class=" card-title"> Log in </h1>
                    </div>
                    <div class=" card-body">

                    <!-- Email -->
                    <div
                        class=" input-group"
                        [ngClass]="{
                        'has-danger': (((lfocusTouched && loginF.email.value != '') || loginAttempt) && loginF.email.errors),
                        'has-success': !loginF.email.errors
                        }"
                    >
                        <div class=" input-group-prepend">
                        <div class=" input-group-text">
                            <i class=" tim-icons icon-email-85"> </i>
                        </div>
                        </div>
                        <input
                        class=" form-control"
                        name="email"
                        formControlName="email"
                        placeholder="Email"
                        type="email"
                        (focus)="lfocusTouched = true"
                        required=""
                        />
                    </div>
                    <div
                        class="error custom-error-label"
                        *ngIf="(((lfocusTouched && loginF.email.value != '') || loginAttempt) && loginF.email.errors)"
                        > Please enter your login email address.
                    </div>

                    <!-- Password -->
                    <div
                        class=" input-group"
                        [ngClass]="{
                        'has-danger': (((lfocusTouched1 && loginF.password.value != '') || loginAttempt) && loginF.password.errors),
                        'has-success': !loginF.password.errors
                        }"
                    >
                        <div class=" input-group-prepend">
                        <div class=" input-group-text">
                            <i class=" tim-icons icon-lock-circle"> </i>
                        </div>
                        </div>
                        <input
                        class=" form-control"
                        name="password"
                        formControlName="password"
                        placeholder="Password"
                        type="password"
                        (focus)="lfocusTouched1 = true"
                        required=""
                        />
                    </div>
                    <div
                        class="error custom-error-label"
                        *ngIf="(((lfocusTouched1 && loginF.password.value != '') || loginAttempt) && loginF.password.errors)"
                        > Your password has at least 6 characters.
                    </div>

                    <!-- Login Submit Button -->
                    <button
                    class=" btn btn-primary btn-lg btn-block btn-round mt-4 mb-3"
                    type="submit"
                    >
                        <span
                        *ngIf="login"
                        class="spinner-border spinner-border-sm"
                        role="status"
                        ></span> {{ login ? 'Logging in...' : 'Login' }}
                    </button>
                    <div class=" pull-left">
                        <h5>
                        <a class=" link footer-link" href="javascript:void(0)" (click)="forgotPassword()">
                            Forgotten Password? 
                        </a>
                        </h5>
                    </div>
                    <div class=" pull-right">
                        <h5>
                        <a class=" link footer-link" href="https://lifecoach.freshdesk.com/support/home" target="_blank">
                            Need Help?
                        </a>
                        </h5>
                    </div>

                    </div>
                    
                    <div class=" card-footer">
                    <hr>
                    <div class=" text-center">
                        Don't have an account? <a href="javascript:void(0)" (click)="loginModal.hide ; registerModal.show()">Sign Up</a>
                    </div>
                    </div>
                </div>
                </form>
            </div>
            </div>
        </div>
        </div>
        <!-- End of login modal -->

        <!-- Register modal -->
        <div
            aria-hidden="true"
            aria-labelledby="registerModalLabel"
            bsModal
            class="modal fade"
            #registerModal="bs-modal"
            id="registerModal"
            role="dialog"
            tabindex="-1"
        >
        <div class="modal-dialog" style="transform: translate(0,0);">
            <div class="modal-content">
            <div class="modal-body">
                <form
                class=" form"
                id="RegisterValidation"
                [formGroup]="registerForm"
                (ngSubmit)="onRegister()"
                >
                <div class="card card-register card-white">
                    <div class=" card-header">
                    <img class="card-img" style="width: 86%;" alt="" src="assets/img/card-primary.png" />
                    <h1 class=" card-title"> Sign Up </h1>
                    </div>
                    <div class=" card-body">

                        <div class=" row">
                            <div class=" col">
                              <p> Just a second! You need a Lifecoach account to continue. 
                                Joining Lifecoach is free and only takes seconds!
                              </p>
                            </div>
                        </div>

                    <div class=" row mt-3">

                        <!-- First Name -->
                        <div class=" col-sm-12 col-md-6 pr-2">
                        <div
                        class=" input-group"
                        [ngClass]="{
                            'has-danger': (((rfocusTouched && registerF.firstName.value != '') || registerAttempt) && registerF.firstName.errors),
                            'has-success': !registerF.firstName.errors
                        }"
                        >
                            <div class=" input-group-prepend">
                            <div class=" input-group-text">
                                <i class=" tim-icons icon-single-02"> </i>
                            </div>
                            </div>
                            <input
                            class=" form-control"
                            name="firstName"
                            formControlName="firstName"
                            placeholder="First Name"
                            type="text"
                            (focus)="rfocusTouched = true"
                            required=""
                            />
                            <label
                            class="error custom-error-label"
                            *ngIf="(((rfocusTouched && registerF.firstName.value != '') || registerAttempt) && registerF.firstName.errors)"
                            > Please enter your first name.
                            </label>
                        </div>
                        </div>

                        <!-- Last Name -->
                        <div class=" col-sm-12 col-md-6">
                        <div
                        class=" input-group"
                        [ngClass]="{
                            'has-danger': (((rfocusTouched3 && registerF.lastName.value != '') || registerAttempt) && registerF.lastName.errors),
                            'has-success': !registerF.lastName.errors
                        }"
                        >
                            <div class=" input-group-prepend">
                            <div class=" input-group-text">
                                <i class=" tim-icons icon-single-02"> </i>
                            </div>
                            </div>
                            <input
                            class=" form-control"
                            name="lastName"
                            formControlName="lastName"
                            placeholder="Last Name"
                            type="text"
                            (focus)="rfocusTouched3 = true"
                            required=""
                            />
                            <label
                            class="error custom-error-label"
                            *ngIf="(((rfocusTouched3 && registerF.lastName.value != '') || registerAttempt) && registerF.lastName.errors)"
                            > Please enter your last name.
                        </label>
                        </div>
                        </div>
                    </div>

                    <!-- Email -->
                    <div
                        class=" input-group"
                        [ngClass]="{
                        'has-danger': (((rfocusTouched1 && registerF.email.value != '') || registerAttempt) && registerF.email.errors),
                        'has-success': !registerF.email.errors
                        }"
                    >
                        <div class=" input-group-prepend">
                        <div class=" input-group-text">
                            <i class=" tim-icons icon-email-85"> </i>
                        </div>
                        </div>
                        <input
                        class=" form-control"
                        name="email"
                        formControlName="email"
                        placeholder="Email"
                        type="email"
                        (focus)="rfocusTouched1 = true"
                        required=""
                        />
                        <label
                        class="error custom-error-label"
                        *ngIf="(((rfocusTouched1 && registerF.email.value != '') || registerAttempt) && registerF.email.errors)"
                        > We will never share your email address without your permission.
                        </label>
                    </div>

                    <!-- Create Password -->
                    <div
                        class=" input-group"
                        [ngClass]="{
                        'has-danger': (((rfocusTouched2 && registerF.password.value != '') || registerAttempt) && registerF.password.errors),
                        'has-success': registerF.password.value != '' && !registerF.password.errors
                        }"
                    >
                        <div class=" input-group-prepend">
                        <div class=" input-group-text">
                            <i class=" tim-icons icon-lock-circle"> </i>
                        </div>
                        </div>
                        <input
                        class=" form-control"
                        name="password"
                        formControlName="password"
                        placeholder="Create Password"
                        type="password"
                        (focus)="rfocusTouched2 = true"
                        required=""
                        />
                        <label
                        class="error custom-error-label"
                        *ngIf="(((rfocusTouched2 && registerF.password.value != '') || registerAttempt) && registerF.password.errors)"
                        > Password must be at least 6 characters.
                    </label>
                    </div>

                    <!-- Form Submit Button -->
                    <button
                    class=" btn btn-primary btn-round btn-block mt-4"
                    type="submit"
                    >
                        <span
                        *ngIf="register"
                        class="spinner-border spinner-border-sm"
                        role="status"
                        ></span> {{ register ? 'Creating Account...' : 'Sign Up'}} 
                    </button>

                    <!-- Terms & Conditions -->
                    <div class=" text-center text-muted mt-3">
                        By signing up, you agree to our
                        <a href="https://lifecoach.freshdesk.com/a/solutions/articles/47000883660" target="_blank"> 
                        terms and conditions. 
                        </a>
                    </div>

                    </div>
                    <div class=" card-footer">
                    <hr>
                    <div class=" text-center">
                        Already have an account? <a href="javascript:void(0)" (click)="registerModal.hide() ; loginModal.show()">Log in</a>
                    </div>
                    </div>
                </div>
                </form>
            </div>
            </div>
        </div>
        </div>
        <!-- End of register modal -->
    </div>
  </div>
</div>
