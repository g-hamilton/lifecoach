<!-- loading person -->
<div *ngIf="!person" class="text-center">
    <div class="spinner-border" role="status">
        <span class="sr-only">Loading...</span>
    </div>
</div>

<!-- person loaded -->
<div *ngIf="person">
    <div class=" card card-timeline card-plain">
        <div class=" card-body">
          <ul class=" timeline timeline-simple">
            <li *ngFor="let item of person.history ; let i = index" class=" timeline-inverted">

                <!-- badge -->
                <div *ngIf="item.action === 'sent_first_message'" class=" timeline-badge success">
                    <i class="fas fa-comments"></i>
                </div>
                <div *ngIf="item.action === 'enrolled_in_self_study_course'" class=" timeline-badge primary">
                    <i class="fas fa-play-circle"></i>
                </div>

                <!-- panel -->
                <div class=" timeline-panel">

                    <!-- heading -->
                    <div class=" timeline-heading">
                        <span *ngIf="item.action === 'sent_first_message'" class=" badge badge-success"> New Lead </span>
                        <span *ngIf="item.action === 'enrolled_in_self_study_course'" class=" badge badge-primary"> Enrolled In eCourse </span>

                        <!-- time / date of this action -->
                        <span class="pull-right">
                            <small class="text-muted">
                                {{ getDisplayDate(item.id) + ' ' + getDisplayTime(item.id) }}
                            </small>
                        </span>
                    </div>

                    <!-- body -->
                    <div class=" timeline-body">
                        <p *ngIf="item.action === 'sent_first_message'">
                            {{ person.firstName }} first contacted you by message. 
                            <a class=" pl-2" [routerLink]="['/messages', 'rooms', person.history[i].roomId]">
                                View Messages
                            </a>
                        </p>
                        <p *ngIf="item.action === 'enrolled_in_self_study_course'">
                            {{ person.firstName }} enrolled in an eCourse.
                        </p>
                    </div>

                    <!-- footer -->
                    <!-- <div class=" timeline-footer">
                        <hr>
                    </div> -->
                </div>
            </li>
          </ul>
        </div>
    </div>
</div>
